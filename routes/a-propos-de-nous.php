<!-- This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at http://mozilla.org/MPL/2.0/.
  This Source Code Form is "Incompatible With Secondary Licenses", as
  defined by the Mozilla Public License, v. 2.0. -->
<?php $titre = "√Ä propos de nous" ?>
<script src="/jorg-chart-1.0.js"></script>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<div class="flex flex-col">
	<?php foreach (
		[
			[
				"image" => "/about-us/notre_histoire.jpg",
				"id" => "Notre histoire",
				"titre" => "Notre histoire",
				"description" => "Chez TenderNess, nous croyons que chaque peluche m√©rite d‚Äô√™tre plus qu‚Äôun simple jouet.\n\nElle doit √™tre un compagnon √©co-responsable, doux pour le c≈ìur et pour la plan√®te.\n\nTout a commenc√© avec une simple id√©e : cr√©er des peluches en harmonie avec la nature, fabriqu√©es avec des mat√©riaux √©cologiques, mais aussi charg√©es de tendresse et d‚Äôhistoire."
			],
			[
				"image" => "/about-us/nos_valeurs.jpg",
				"id" => "Nos valeurs",
				"titre" => "Nos valeurs :\n√âthique, √âcologique et √âducatif",
				"description" => "Nous nous engageons √† proposer des peluches fabriqu√©es de mani√®re √©thique et durable.\n\nChaque peluche est con√ßue avec des mat√©riaux 100% bio et recycl√©s.\n\nDe plus, nous mettons un point d'honneur √† soutenir des projets √©coresponsables et √† faire notre part pour la protection de la faune et de la flore."
			],
			[
				"image" => "/about-us/nos_engagements.jpg",
				"id" => "Nos engagements",
				"titre" => "Nos engagements :",
				"description" => "<span>üß∏</span> Mat√©riaux √©cologiques : Coton bio, fibres recycl√©es, rembourrage durable.\n\n<span>üåç</span> Fabrication √©thique : Ateliers responsables avec des conditions de travail respectueuses.\n\n<span>üíö</span> Soutien √† des causes sociales et environnementales : Pour chaque peluche achet√©e, nous reversons 1‚Ç¨ √† des associations de protection animale et plantons un arbre pour chaque collection vendue."
			],
			[
				"image" => "/about-us/equipe_derriere.jpg",
				"id" => "L'√©quipe derri√®re",
				"titre" => "L‚Äô√©quipe derri√®re TenderNess",
				"description" => "Derri√®re chaque peluche, il y a une √©quipe passionn√©e. Nous sommes une famille de <span id=\"teamCount\" style=\"font-family: inherit;\"></span> personnes, r√©unies par une mission commune : cr√©er des compagnons tout doux, respectueux de l‚Äôenvironnement et porteurs de valeurs fortes.\n\n<span>üßµ</span> Des cr√©ateurs engag√©s : Du design √† la couture, chaque membre apporte son savoir-faire pour donner vie √† des peluches uniques.\n\n<span>üíö</span> Une √©quipe soud√©e : Chacun de nous met son c≈ìur dans cette aventure, convaincu qu‚Äôun petit geste peut faire une grande diff√©rence.\n\nEnsemble, nous fa√ßonnons un monde plus doux, une peluche √† la fois."
			],
			[
				"image" => "/about-us/avis_clients.jpg",
				"id" => "Avis clients",
				"titre" => "Ce que nos clients disent de nous",
				"description" => "¬´ J‚Äôai achet√© une peluche pour ma fille, elle est tellement douce !\nCe que j‚Äôaime le plus, c‚Äôest que je sais qu‚Äôelle est fabriqu√©e avec des mat√©riaux durables et qu‚Äôelle aide aussi √† une cause qui me tient √† c≈ìur. ¬ª\n‚Äî Claire, maman de L√©a\n\n¬´ Une peluche si mignonne et tellement douce, mon fils l'adore !\nJe suis ravi de soutenir une entreprise qui pense √† la plan√®te. ¬ª\n‚Äî Paul, papa de Lucas"
			],
			[
				"image" => "/about-us/notre_impact.jpg",
				"id" => "Notre impact",
				"titre" => "Notre impact jusqu'√† pr√©sent",
				"description" => "Gr√¢ce √† vous, nous avons d√©j√† plant√© 1 000 arbres et aid√© plus de 500 animaux gr√¢ce √† nos dons.\n\nChaque peluche vendue contribue √† faire une diff√©rence.\n\nNous vous remercions de soutenir notre aventure et de participer √† un changement positif."
			],
			[
				"image" => "/about-us/pourquoi_adopter_peluche_ethique.jpg",
				"id" => "Pourquoi adopter une peluche √©thique",
				"titre" => "Pourquoi adopter une peluche √©thique ?",
				"description" => "Nos peluches ne sont pas simplement des jouets, elles sont des acteurs du changement.\n\nEn adoptant une peluche de TenderNess, vous choisissez un produit qui respecte l‚Äôenvironnement, mais aussi une cause sociale.\n\nVous donnez une seconde vie √† la plan√®te, une peluche √† la fois."
			]
		] as $index => $categorie
	) : ?>
		<a name="<?= $categorie["id"] ?>"></a>
		<div class="w-full h-full justify-self-center self-center flex justify-center items-center">
			<div class="flex-wrap md:flex-nowrap flex flex-row<?= $index % 2 != 0 ? "-reverse" : "" ?>">
				<div class="relative md:w-3/5 w-full <?= $categorie["id"] == "L'√©quipe derri√®re" ? "cursor-zoom-in" : "" ?>" <?= $categorie["id"] == "L'√©quipe derri√®re" ? "onclick=\"openModal()\"" : "" ?>>
					<img <?= $categorie["id"] == "L'√©quipe derri√®re" ? "id=\"organigramme\"" : "" ?> class="object-cover h-full" src="<?= $categorie["image"] ?>" alt="Image de <?= $categorie["id"] ?>">
					<?php if ($categorie["id"] == "L'√©quipe derri√®re"): ?>
						<div class="absolute inset-0 bg-black/75 opacity-0 hover:opacity-100 transition-opacity duration-300 flex justify-center items-center">
							<div class="pointer-events-none">
								<h2 class="text-white text-center text-4xl font-semibold">Cliquez ici pour voir notre organigramme</h2>
							</div>
						</div>
					<?php endif; ?>
				</div>
				<div class="md:w-2/4 w-full bg-black text-white">
					<div class="py-8 md:px-8 flex flex-col h-full justify-center gap-8">
						<h2 class="text-center text-4xl font-semibold"><?= nl2br($categorie["titre"]) ?></h2>
						<p class="text-center sm:text-start"><?= nl2br($categorie["description"]) ?></p>
					</div>
				</div>
			</div>
		</div>
	<?php endforeach; ?>
</div>
<div id="imageModal" class="fixed inset-0 bg-black/75 hidden justify-center items-center place-content-center z-50 p-20 cursor-zoom-out" onclick="closeModal(event)">
	<a id="modalDownload" class="absolute top-0 right-0 text-white text-3xl mt-3 mr-5 hidden" target="_blank"><i class="fa-solid fa-download"></i></a>
	<div class="relative h-full w-full">
		<div id="modalImageContainer" class="h-full w-full max-h-full max-w-full flex justify-center items-center">
			<iframe id="modalImage" class="max-h-full max-w-full w-full h-full object-contain min-w-min" frameborder="0" scrolling="auto"></iframe>
		</div>
	</div>
</div>
<script>
	const orga = [{
			group: "direction",
			groupName: "Direction",
			nodes: [{
					id: "Node1",
					title: "Alice Morel",
					text: [
						"Directrice G√©n√©rale (DG)",
						"5 ans d'anciennet√©",
						"D√©finit la vision et la strat√©gie globale de l'entreprise",
						"Supervise les √©quipes et fixe les objectifs de croissance",
						"Assure le d√©veloppement et la p√©rennit√© du site e-commerce"
					]
				},
				{
					id: "Node1.1",
					title: "Thomas Lef√®vre",
					text: [
						"Directeur des Op√©rations",
						"4 ans d'anciennet√©",
						"Optimise les processus de production et logistique",
						"Supervise la gestion des stocks et des exp√©ditions",
						"Veille √† la satisfaction client et √† l'am√©lioration continue"
					]
				}
			]
		},
		{
			group: "logistique",
			groupName: "Logistique & Gestion des Stocks",
			parent: "direction",
			nodes: [{
					id: "Node1.1.1",
					title: "Maxime Durand",
					text: [
						"Responsable Logistique",
						"3 ans d'anciennet√©",
						"Supervise l‚Äôapprovisionnement et la gestion des stocks",
						"Optimise la cha√Æne logistique pour des livraisons rapides"
					]
				},
				{
					id: "Node1.1.1.1",
					title: "Sophie Lambert",
					text: [
						"Gestionnaire des Stocks",
						"2 ans d'anciennet√©",
						"Contr√¥le l‚Äô√©tat des stocks et passe les commandes aux fournisseurs",
						"Assure la bonne r√©ception et organisation des produits"
					]
				}
			]
		},
		{
			group: "controle_qualite",
			groupName: "Contr√¥le Qualit√© & Exp√©dition",
			parent: "direction",
			nodes: [{
					id: "Node1.1.2",
					title: "Vincent Lemoine",
					text: [
						"Responsable Contr√¥le Qualit√©",
						"5 ans d'anciennet√©",
						"V√©rifie la conformit√© des peluches avant leur mise en stock",
						"S‚Äôassure que les normes √©thiques et √©cologiques sont respect√©es"
					]
				},
				{
					id: "Node1.1.2.1",
					title: "Emma Roux",
					text: [
						"Responsable Emballage",
						"3 ans d'anciennet√©",
						"Emballe les peluches dans des mat√©riaux √©cologiques",
						"G√®re l‚Äôenvoi des commandes clients"
					]
				}
			]
		},
		{
			group: "developpement_it",
			groupName: "D√©veloppement Web & IT",
			parent: "direction",
			nodes: [{
					id: "Node1.2",
					title: "Amand Alexandre",
					text: [
						"D√©veloppeur Full Stack",
						"6 ans d'anciennet√©",
						"D√©veloppe et maintient le site e-commerce",
						"Optimise l'exp√©rience utilisateur et la rapidit√© du site",
						"D√©veloppe l'interface utilisateur et l‚Äôoptimise pour mobile",
						"Am√©liore le design et l‚Äôaccessibilit√© du site",
						"Impl√©mente les fonctionnalit√©s et API n√©cessaires"
					]
				},
				{
					id: "Node1.2.1",
					title: "√âmilie Roche",
					text: [
						"Responsable IT & Cybers√©curit√©",
						"5 ans d'anciennet√©",
						"Assure la protection des donn√©es et la s√©curit√© du site",
						"Met en place les solutions de paiement s√©curis√©es",
						"G√®re les bases de donn√©es et la s√©curit√© du site"
					]
				},
				{
					id: "Node1.2.2",
					title: "Lucie Durand",
					text: [
						"Analyste de Donn√©es",
						"2 ans d'anciennet√©",
						"Analyse les donn√©es de vente et le comportement des clients",
						"Optimise la conversion"
					]
				},
				{
					id: "Node1.2.3",
					title: "Julien Lef√®vre",
					text: [
						"Sp√©cialiste en Exp√©rience Client (UX/UI)",
						"3 ans d'anciennet√©",
						"Am√©liore l‚Äôexp√©rience utilisateur sur le site web"
					]
				}
			]
		},
		{
			group: "marketing",
			groupName: "Marketing & Communication",
			parent: "direction",
			nodes: [{
					id: "Node1.3",
					title: "L√©a Fontaine",
					text: [
						"Responsable Marketing Digital",
						"4 ans d'anciennet√©",
						"D√©veloppe et met en ≈ìuvre la strat√©gie marketing",
						"Analyse les performances et optimise la conversion"
					]
				},
				{
					id: "Node1.3.1",
					title: "Pierre Martin",
					text: [
						"Community Manager",
						"3 ans d'anciennet√©",
						"G√®re les r√©seaux sociaux et l‚Äôengagement client",
						"Anime la communaut√© et r√©pond aux avis/commentaires"
					]
				},
				{
					id: "Node1.3.2",
					title: "Am√©lie Petit",
					text: [
						"R√©dactrice Web & SEO",
						"2 ans d'anciennet√©",
						"R√©dige les descriptions des produits et les articles de blog",
						"Optimise le r√©f√©rencement naturel du site"
					]
				},
				{
					id: "Node1.3.3",
					title: "Sophie Girard",
					text: [
						"Graphiste",
						"3 ans d'anciennet√©",
						"Cr√©e des visuels attractifs pour le site web"
					]
				}
			]
		},
		{
			group: "fabrication",
			groupName: "Fabrication des Peluches",
			parent: "direction",
			nodes: [{
					id: "Node1.4",
					title: "Antoine Leroy",
					text: [
						"Designer Produit",
						"4 ans d'anciennet√©",
						"Con√ßoit les mod√®les de peluches",
						"Travaille avec les fournisseurs sur la qualit√© et les mat√©riaux"
					]
				},
				{
					id: "Node1.4.1",
					title: "Sophie Renard",
					text: [
						"Responsable Atelier de Fabrication",
						"5 ans d'anciennet√©",
						"Supervise la production des peluches",
						"V√©rifie la qualit√© des mati√®res premi√®res",
						"Coordonne les artisans et couturiers"
					]
				},
				{
					id: "Node1.4.1.1",
					title: "Jean-Luc Dupont",
					text: [
						"Couturier Sp√©cialiste",
						"6 ans d'anciennet√©",
						"Assemble les peluches avec pr√©cision",
						"Travaille sur des coutures complexes et personnalisations"
					]
				},
				{
					id: "Node1.4.1.2",
					title: "M√©lanie Girard",
					text: [
						"Couturi√®re & Remplisseuse",
						"3 ans d'anciennet√©",
						"Remplit les peluches avec des mat√©riaux √©cologiques",
						"Fait les finitions (broderies, d√©tails esth√©tiques)",
						"Assure le contr√¥le qualit√© avant exp√©dition"
					]
				},
				{
					id: "Node1.4.1.3",
					title: "Clara Masson",
					text: [
						"Couturi√®re & Brodeuse",
						"2 ans d'anciennet√©",
						"R√©alise les broderies et personnalisations",
						"Assure la solidit√© des coutures"
					]
				},
				{
					id: "Node1.4.1.4",
					title: "Hugo Perrin",
					text: [
						"Assistant Couture",
						"1 an d'anciennet√©",
						"Aide √† la pr√©paration des tissus et des patrons",
						"V√©rifie la conformit√© des pi√®ces avant assemblage"
					]
				}
			]
		},
		{
			group: "remplissage",
			groupName: "Remplissage & Finitions",
			parent: "fabrication",
			nodes: [{
					id: "Node1.4.2",
					title: "Marion Lefebvre",
					text: [
						"Responsable Remplissage",
						"4 ans d'anciennet√©",
						"G√®re le remplissage des peluches",
						"V√©rifie la densit√© et la texture des mati√®res utilis√©es"
					]
				},
				{
					id: "Node1.4.2.1",
					title: "L√©a Durand",
					text: [
						"Op√©ratrice de Finitions",
						"2 ans d'anciennet√©",
						"V√©rifie la qualit√© et l‚Äôapparence des peluches avant exp√©dition",
						"Ajoute les √©l√©ments de finition (yeux, accessoires)"
					]
				},
				{
					id: "Node1.4.2.2",
					title: "Camille Bernard",
					text: [
						"Assistante Finitions",
						"1 an d'anciennet√©",
						"V√©rifie les derniers d√©tails et effectue les retouches"
					]
				}
			]
		},
		{
			group: "service_client",
			groupName: "Service Client",
			parent: "direction",
			nodes: [{
					id: "Node1.5",
					title: "Kevin Bernard",
					text: [
						"Responsable Service Client",
						"3 ans d'anciennet√©",
						"Coordonne l‚Äô√©quipe du service client",
						"G√®re les r√©clamations et am√©liore la satisfaction client"
					]
				},
				{
					id: "Node1.5.1",
					title: "Julie Mercier",
					text: [
						"Conseill√®re Client√®le",
						"2 ans d'anciennet√©",
						"R√©pond aux questions des clients et traite les demandes",
						"G√®re les retours et remboursements"
					]
				}
			]
		},
		{
			group: "ressources_humaines",
			groupName: "Ressources Humaines",
			parent: "direction",
			nodes: [{
				id: "Node1.6",
				title: "Marie Dupont",
				text: [
					"Responsable RH",
					"5 ans d'anciennet√©",
					"G√®re le recrutement, la formation, le bien-√™tre des employ√©s",
					"Assure le respect des lois et r√©gulations"
				]
			}]
		},
		{
			group: "juridique",
			groupName: "Juridique",
			parent: "direction",
			nodes: [{
				id: "Node1.7",
				title: "Paul Martin",
				text: [
					"Juriste",
					"4 ans d'anciennet√©",
					"S‚Äôassure que l‚Äôentreprise respecte les lois et r√©gulations",
					"G√®re les contrats et prot√®ge la propri√©t√© intellectuelle"
				]
			}]
		},
		{
			group: "achats",
			groupName: "Achats",
			parent: "direction",
			nodes: [{
				id: "Node1.8",
				title: "Clara Bernard",
				text: [
					"Responsable des Achats",
					"3 ans d'anciennet√©",
					"G√®re les relations avec les fournisseurs et n√©gocie les contrats"
				]
			}]
		}
	];
	let init = false;

	window.addEventListener("DOMContentLoaded", function () {
		let teamCount = document.getElementById("teamCount");
		if (teamCount) teamCount.innerText = orga.reduce(function (accumulator, currentValue) {
			return accumulator += currentValue["nodes"].length
		}, 0)
	});

	function openModal() {
		document.getElementById("imageModal")?.classList.remove("hidden");
		if (init != true) {
			let organigramme = document.getElementById("organigramme"),
				modalImage = document.getElementById("modalImage"),
				modalDownload = document.getElementById("modalDownload");
			if (organigramme && modalImage && modalDownload) {
				let output = document.createElement("svg"),
					chart = new JSVGOrganisationChart(output);
				for (const groupData of orga) {
					chart.addGroup(
						groupData.parent,
						groupData.group,
						groupData.groupName
					);
					for (const nodeData of groupData.nodes) {
						chart.addNode(
							groupData.group,
							nodeData.parent,
							nodeData.id,
							nodeData.title,
							nodeData.text
						)
					}
				};
				modalImage.src = "about:blank";
				modalImage.onload = () => {
					chart.drawChart();
					const iframeDoc = modalImage.contentDocument || modalImage.contentWindow.document;
					iframeDoc.open();
					iframeDoc.write(`<html><body>${output.outerHTML}</body></html>`);
					html2canvas(iframeDoc.body).then(function(canvas) {
						modalDownload.href = canvas.toDataURL("image/png");
						modalDownload.classList.remove("hidden");
						iframeDoc.close();
						init = true
					})
				}
			}
		}
	};

	function closeModal(event) {
		if (event.target == event.currentTarget) document.getElementById("imageModal")?.classList.add("hidden")
	}
</script>